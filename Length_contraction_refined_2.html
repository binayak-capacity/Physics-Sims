<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Length Contraction Simulation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            background: #0a0e1a; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow: hidden;
            color: #e2e8f0;
        }
        
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: rgba(10, 14, 26, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding-left: 20px;
            z-index: 1001;
        }
        
        .top-bar-title {
            font-size: 22px;
            font-weight: 600;
            color: #60a5fa;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .right-panel {
            position: fixed;
            top: 50px;
            right: 0;
            width: 320px;
            height: calc(100vh - 50px);
            background: rgba(10, 14, 26, 0.95);
            backdrop-filter: blur(12px);
            border-left: 1px solid rgba(148, 163, 184, 0.1);
            display: flex;
            flex-direction: column;
            padding: 20px;
            gap: 20px;
            z-index: 1000;
            overflow-y: auto;
        }
        
        .panel-header {
            font-size: 18px;
            font-weight: 600;
            color: #60a5fa;
            white-space: nowrap;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.15);
        }
        
        .stat-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            font-size: 13px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        
        .stat-group-title {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
        }
        
        .stat-label {
            color: #94a3b8;
            font-size: 12px;
        }
        
        .stat-value {
            color: #f1f5f9;
            font-weight: 600;
            font-variant-numeric: tabular-nums;
            font-size: 14px;
        }
        
        .stat-value.highlight {
            color: #34d399;
        }
        
        .stat-value.warning {
            color: #fbbf24;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        
        .control {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .control-label {
            font-size: 11px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .slider {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(148, 163, 184, 0.2);
            border-radius: 3px;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
        }
        
        .slider-value {
            font-size: 14px;
            font-weight: 600;
            color: #60a5fa;
            min-width: 55px;
            text-align: right;
        }
        
        #canvas-container {
            position: fixed;
            top: 50px;
            left: 0;
            right: 320px;
            bottom: 0;
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .info-panel {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            padding: 15px;
            font-size: 12px;
        }
        
        .panel-title {
            font-size: 13px;
            font-weight: 600;
            color: #60a5fa;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .graph-panel {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            padding: 15px;
        }
        
        .graph-title {
            font-size: 11px;
            color: #94a3b8;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        #lorentzGraph {
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            width: 100%;
        }
        
        .about-text {
            color: #94a3b8;
            font-size: 12px;
            line-height: 1.6;
        }
        
        .about-text p {
            margin-bottom: 10px;
        }
        
        .about-text strong {
            color: #e2e8f0;
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="top-bar-title">Length Contraction Simulation</div>
    </div>
    
    <div id="canvas-container">
        <canvas id="mainCanvas"></canvas>
    </div>
    
    <div class="right-panel">
        <div class="panel-header">üéÆ Controls & Stats</div>
        
        <div class="controls">
            <div class="control">
                <span class="control-label">Velocity (fraction of c)</span>
                <div class="slider-container">
                    <input type="range" class="slider" id="velocitySlider" min="0" max="99" value="0">
                    <span class="slider-value" id="velocityValue">0.00c</span>
                </div>
            </div>
        </div>
        
        <div class="stat-group">
            <div class="stat-group-title">Measurements</div>
            <div class="stat">
                <span class="stat-label">Velocity</span>
                <span class="stat-value highlight" id="velocityDisplay">0.00c</span>
            </div>
            <div class="stat">
                <span class="stat-label">Lorentz Factor Œ≥</span>
                <span class="stat-value" id="gammaDisplay">1.000</span>
            </div>
            <div class="stat">
                <span class="stat-label">Rest Length</span>
                <span class="stat-value" id="restLength">200 m</span>
            </div>
            <div class="stat">
                <span class="stat-label">Contracted Length</span>
                <span class="stat-value warning" id="contractedLength">200 m</span>
            </div>
            <div class="stat">
                <span class="stat-label">Contraction</span>
                <span class="stat-value" id="contractionPercent">0%</span>
            </div>
        </div>
        
        <div class="graph-panel">
            <div class="graph-title">Length vs Velocity</div>
            <canvas id="lorentzGraph" width="280" height="140"></canvas>
        </div>
        
        <div class="info-panel">
            <div class="panel-title">‚ÑπÔ∏è About This Simulation</div>
            <div class="about-text">
                <p>This simulation demonstrates <strong>Length Contraction</strong>, a key prediction of Einstein's Special Theory of Relativity.</p>
                <p>As an object moves faster relative to an observer, it appears <strong>shorter</strong> in the direction of motion. This effect becomes significant only at speeds approaching the speed of light (c).</p>
                <p>Use the <strong>velocity slider</strong> to see how a rocket's length changes as observed from a stationary reference frame.</p>
            </div>
        </div>
    </div>
    
    <script>
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        const graphCanvas = document.getElementById('lorentzGraph');
        const graphCtx = graphCanvas.getContext('2d');
        
        let width, height;
        let velocity = 0;
        let time = 0;
        let animationPhase = 0;
        
        const restLength = 200;
        const c = 1;
        
        const baseAnimSpeed = 0.016;
        
        function resize() {
            const container = document.getElementById('canvas-container');
            width = container.clientWidth;
            height = container.clientHeight;
            canvas.width = width;
            canvas.height = height;
        }
        
        window.addEventListener('resize', resize);
        resize();
        
        function lorentzFactor(v) {
            return 1 / Math.sqrt(1 - (v * v) / (c * c));
        }
        
        function contractedLength(L0, v) {
            return L0 / lorentzFactor(v);
        }
        
        function getAnimationSpeed() {
            const minSpeed = 0.2;
            const maxSpeed = 3.0;
            return minSpeed + (maxSpeed - minSpeed) * (velocity / 0.99);
        }
        
        function drawGrid() {
            ctx.strokeStyle = 'rgba(96, 165, 250, 0.1)';
            ctx.lineWidth = 1;
            
            const gridSize = 50;
            const scrollSpeed = 50 * getAnimationSpeed();
            const offsetX = (time * scrollSpeed) % gridSize;
            
            for (let x = -gridSize + offsetX; x < width + gridSize; x += gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            for (let y = 0; y < height; y += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
        }
        
        function drawDetailedRocket(x, y, length, isMoving, label, displayLength) {
            const rocketHeight = 50;
            const noseLength = length * 0.25;
            const bodyLength = length * 0.55;
            const engineLength = length * 0.2;
            
            ctx.save();
            ctx.translate(x, y);
            
            // Main body gradient
            const bodyGradient = ctx.createLinearGradient(0, -rocketHeight/2, 0, rocketHeight/2);
            if (isMoving) {
                bodyGradient.addColorStop(0, '#e8e8e8');
                bodyGradient.addColorStop(0.3, '#ffffff');
                bodyGradient.addColorStop(0.7, '#d0d0d0');
                bodyGradient.addColorStop(1, '#a0a0a0');
            } else {
                bodyGradient.addColorStop(0, '#e8e8e8');
                bodyGradient.addColorStop(0.3, '#ffffff');
                bodyGradient.addColorStop(0.7, '#d0d0d0');
                bodyGradient.addColorStop(1, '#a0a0a0');
            }
            
            // Draw main body (cylindrical section)
            ctx.fillStyle = bodyGradient;
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1.5;
            
            const bodyStartX = -length/2 + engineLength;
            const bodyEndX = bodyStartX + bodyLength;
            
            ctx.beginPath();
            ctx.moveTo(bodyStartX, -rocketHeight/2 + 5);
            ctx.lineTo(bodyEndX, -rocketHeight/2 + 5);
            ctx.lineTo(bodyEndX, rocketHeight/2 - 5);
            ctx.lineTo(bodyStartX, rocketHeight/2 - 5);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Draw nose cone
            const noseGradient = ctx.createLinearGradient(bodyEndX, 0, bodyEndX + noseLength, 0);
            noseGradient.addColorStop(0, '#ff3333');
            noseGradient.addColorStop(0.5, '#ff6666');
            noseGradient.addColorStop(1, '#cc0000');
            
            ctx.fillStyle = noseGradient;
            ctx.beginPath();
            ctx.moveTo(bodyEndX, -rocketHeight/2 + 5);
            ctx.quadraticCurveTo(bodyEndX + noseLength * 0.8, -rocketHeight/4, bodyEndX + noseLength, 0);
            ctx.quadraticCurveTo(bodyEndX + noseLength * 0.8, rocketHeight/4, bodyEndX, rocketHeight/2 - 5);
            ctx.closePath();
            ctx.fill();
            ctx.strokeStyle = '#990000';
            ctx.stroke();
            
            // Draw engine section
            const engineGradient = ctx.createLinearGradient(0, -rocketHeight/2, 0, rocketHeight/2);
            engineGradient.addColorStop(0, '#555');
            engineGradient.addColorStop(0.5, '#777');
            engineGradient.addColorStop(1, '#444');
            
            ctx.fillStyle = engineGradient;
            ctx.strokeStyle = '#333';
            ctx.beginPath();
            ctx.moveTo(-length/2, -rocketHeight/3);
            ctx.lineTo(bodyStartX, -rocketHeight/2 + 5);
            ctx.lineTo(bodyStartX, rocketHeight/2 - 5);
            ctx.lineTo(-length/2, rocketHeight/3);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Draw fins
            const finColor = '#ff3333';
            ctx.fillStyle = finColor;
            ctx.strokeStyle = '#990000';
            ctx.lineWidth = 1;
            
            // Top fin
            ctx.beginPath();
            ctx.moveTo(bodyStartX + bodyLength * 0.1, -rocketHeight/2 + 5);
            ctx.lineTo(bodyStartX - engineLength * 0.3, -rocketHeight/2 - 20);
            ctx.lineTo(bodyStartX + bodyLength * 0.3, -rocketHeight/2 + 5);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Bottom fin
            ctx.beginPath();
            ctx.moveTo(bodyStartX + bodyLength * 0.1, rocketHeight/2 - 5);
            ctx.lineTo(bodyStartX - engineLength * 0.3, rocketHeight/2 + 20);
            ctx.lineTo(bodyStartX + bodyLength * 0.3, rocketHeight/2 - 5);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Draw windows
            ctx.fillStyle = 'rgba(100, 200, 255, 0.8)';
            ctx.strokeStyle = '#336699';
            ctx.lineWidth = 2;
            
            const windowCount = Math.max(1, Math.floor(length / 80));
            const windowSpacing = bodyLength / (windowCount + 1);
            
            for (let i = 1; i <= windowCount; i++) {
                const windowX = bodyStartX + windowSpacing * i;
                ctx.beginPath();
                ctx.arc(windowX, 0, Math.min(8, length * 0.04), 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                
                // Window shine
                ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.beginPath();
                ctx.arc(windowX - 2, -2, Math.min(3, length * 0.015), 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = 'rgba(100, 200, 255, 0.8)';
            }
            
            // Draw body stripes
            ctx.strokeStyle = 'rgba(0, 0, 100, 0.3)';
            ctx.lineWidth = 2;
            const stripeX = bodyStartX + bodyLength * 0.7;
            ctx.beginPath();
            ctx.moveTo(stripeX, -rocketHeight/2 + 5);
            ctx.lineTo(stripeX, rocketHeight/2 - 5);
            ctx.stroke();
            
            // Draw exhaust flames if moving
            if (isMoving && velocity > 0.05) {
                const flameAnimSpeed = animationPhase * 15 * getAnimationSpeed();
                const flameIntensity = velocity / 0.99;
                const baseFlameLength = 40 + flameIntensity * 80;
                
                // Outer flame (orange/red)
                for (let i = 0; i < 3; i++) {
                    const flameOffset = Math.sin(flameAnimSpeed + i * 2) * 8;
                    const flameLength = baseFlameLength + Math.sin(flameAnimSpeed * 1.5 + i) * 15;
                    
                    const flameGradient = ctx.createLinearGradient(-length/2 - flameLength, 0, -length/2, 0);
                    flameGradient.addColorStop(0, 'rgba(255, 50, 0, 0)');
                    flameGradient.addColorStop(0.3, 'rgba(255, 100, 0, 0.4)');
                    flameGradient.addColorStop(0.6, 'rgba(255, 150, 50, 0.7)');
                    flameGradient.addColorStop(1, 'rgba(255, 200, 100, 0.9)');
                    
                    ctx.fillStyle = flameGradient;
                    ctx.beginPath();
                    ctx.moveTo(-length/2, -rocketHeight/4 + flameOffset * 0.3);
                    ctx.quadraticCurveTo(
                        -length/2 - flameLength * 0.5, flameOffset,
                        -length/2 - flameLength, flameOffset * 0.5
                    );
                    ctx.quadraticCurveTo(
                        -length/2 - flameLength * 0.5, flameOffset,
                        -length/2, rocketHeight/4 + flameOffset * 0.3
                    );
                    ctx.closePath();
                    ctx.fill();
                }
                
                // Inner flame (blue/white core)
                const coreFlameLength = baseFlameLength * 0.6;
                const coreGradient = ctx.createLinearGradient(-length/2 - coreFlameLength, 0, -length/2, 0);
                coreGradient.addColorStop(0, 'rgba(100, 150, 255, 0)');
                coreGradient.addColorStop(0.5, 'rgba(150, 200, 255, 0.6)');
                coreGradient.addColorStop(1, 'rgba(255, 255, 255, 0.9)');
                
                ctx.fillStyle = coreGradient;
                ctx.beginPath();
                ctx.moveTo(-length/2, -rocketHeight/6);
                ctx.quadraticCurveTo(-length/2 - coreFlameLength * 0.5, 0, -length/2 - coreFlameLength, 0);
                ctx.quadraticCurveTo(-length/2 - coreFlameLength * 0.5, 0, -length/2, rocketHeight/6);
                ctx.closePath();
                ctx.fill();
            }
            
            ctx.restore();
            
            // Draw label
            ctx.fillStyle = isMoving ? '#fbbf24' : '#34d399';
            ctx.font = 'bold 13px -apple-system, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(label, x, y + rocketHeight + 35);
            
            ctx.fillStyle = '#94a3b8';
            ctx.font = '12px -apple-system, sans-serif';
            ctx.fillText(`Length: ${displayLength.toFixed(1)} m`, x, y + rocketHeight + 52);
        }
        
        function drawLengthComparison(y, restLen, contractLen) {
            const centerX = width / 2;
            const scale = 1;
            
            ctx.strokeStyle = 'rgba(52, 211, 153, 0.5)';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(centerX - restLen * scale / 2, y - 100);
            ctx.lineTo(centerX - restLen * scale / 2, y + 100);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(centerX + restLen * scale / 2, y - 100);
            ctx.lineTo(centerX + restLen * scale / 2, y + 100);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.strokeStyle = 'rgba(251, 191, 36, 0.8)';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(centerX - contractLen * scale / 2, y + 140);
            ctx.lineTo(centerX + contractLen * scale / 2, y + 140);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(centerX - contractLen * scale / 2, y + 135);
            ctx.lineTo(centerX - contractLen * scale / 2, y + 145);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(centerX + contractLen * scale / 2, y + 135);
            ctx.lineTo(centerX + contractLen * scale / 2, y + 145);
            ctx.stroke();
        }
        
        function drawLorentzGraph() {
            const gw = graphCanvas.width;
            const gh = graphCanvas.height;
            const padding = 30;
            
            graphCtx.fillStyle = 'rgba(0, 0, 0, 0.3)';
            graphCtx.fillRect(0, 0, gw, gh);
            
            graphCtx.strokeStyle = 'rgba(148, 163, 184, 0.3)';
            graphCtx.lineWidth = 1;
            
            graphCtx.beginPath();
            graphCtx.moveTo(padding, padding);
            graphCtx.lineTo(padding, gh - padding);
            graphCtx.lineTo(gw - padding, gh - padding);
            graphCtx.stroke();
            
            graphCtx.fillStyle = '#64748b';
            graphCtx.font = '9px -apple-system, sans-serif';
            graphCtx.textAlign = 'center';
            graphCtx.fillText('0', padding, gh - padding + 12);
            graphCtx.fillText('0.5c', (gw - padding + padding) / 2, gh - padding + 12);
            graphCtx.fillText('c', gw - padding, gh - padding + 12);
            
            graphCtx.textAlign = 'right';
            graphCtx.fillText('L‚ÇÄ', padding - 5, padding + 5);
            graphCtx.fillText('0', padding - 5, gh - padding + 3);
            
            graphCtx.strokeStyle = '#60a5fa';
            graphCtx.lineWidth = 2;
            graphCtx.beginPath();
            
            for (let i = 0; i <= 100; i++) {
                const v = i / 100 * 0.99;
                const L = contractedLength(1, v);
                const x = padding + (i / 100) * (gw - 2 * padding);
                const y = gh - padding - L * (gh - 2 * padding);
                
                if (i === 0) graphCtx.moveTo(x, y);
                else graphCtx.lineTo(x, y);
            }
            graphCtx.stroke();
            
            const currentV = velocity;
            const currentL = contractedLength(1, currentV);
            const dotX = padding + (currentV / 0.99) * (gw - 2 * padding);
            const dotY = gh - padding - currentL * (gh - 2 * padding);
            
            graphCtx.fillStyle = '#f472b6';
            graphCtx.beginPath();
            graphCtx.arc(dotX, dotY, 6, 0, Math.PI * 2);
            graphCtx.fill();
            
            graphCtx.strokeStyle = 'rgba(244, 114, 182, 0.3)';
            graphCtx.setLineDash([3, 3]);
            graphCtx.beginPath();
            graphCtx.moveTo(dotX, gh - padding);
            graphCtx.lineTo(dotX, dotY);
            graphCtx.lineTo(padding, dotY);
            graphCtx.stroke();
            graphCtx.setLineDash([]);
        }
        
        function updateStats() {
            const gamma = lorentzFactor(velocity);
            const contracted = contractedLength(restLength, velocity);
            const contraction = ((1 - contracted / restLength) * 100);
            
            document.getElementById('velocityDisplay').textContent = velocity.toFixed(2) + 'c';
            document.getElementById('gammaDisplay').textContent = gamma.toFixed(3);
            document.getElementById('restLength').textContent = restLength + ' m';
            document.getElementById('contractedLength').textContent = contracted.toFixed(1) + ' m';
            document.getElementById('contractionPercent').textContent = contraction.toFixed(1) + '%';
            document.getElementById('velocityValue').textContent = velocity.toFixed(2) + 'c';
        }
        
        function drawStars() {
            const starCount = 100;
            const starSpeedMultiplier = getAnimationSpeed();
            
            for (let i = 0; i < starCount; i++) {
                const seed = i * 12345.6789;
                const baseStarSpeed = 20 + (i % 5) * 10;
                const x = ((seed * 1.1) % width + time * baseStarSpeed * starSpeedMultiplier * velocity) % width;
                const y = (seed * 2.2) % height;
                const size = 0.5 + (i % 3) * 0.5;
                const alpha = 0.3 + (i % 5) * 0.1;
                
                ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        function animate() {
            ctx.fillStyle = '#0a0e1a';
            ctx.fillRect(0, 0, width, height);
            
            const animSpeed = getAnimationSpeed();
            time += baseAnimSpeed * animSpeed;
            animationPhase += baseAnimSpeed * animSpeed;
            
            drawStars();
            drawGrid();
            
            const contracted = contractedLength(restLength, velocity);
            const scale = 1;
            const centerX = width / 2;
            const topY = height * 0.28;
            const bottomY = height * 0.62;
            
            drawDetailedRocket(centerX, topY, restLength * scale, false, 'Rest Frame (Proper Length)', restLength);
            drawDetailedRocket(centerX, bottomY, contracted * scale, true, 'Moving Frame (v = ' + velocity.toFixed(2) + 'c)', contracted);
            
            drawLengthComparison((topY + bottomY) / 2, restLength, contracted);
            
            drawLorentzGraph();
            updateStats();
            
            requestAnimationFrame(animate);
        }
        
        document.getElementById('velocitySlider').addEventListener('input', function(e) {
            velocity = e.target.value / 100 * 0.99;
        });
        
        animate();
    </script>
</body>
</html>